TW.Runtime.Widgets.eventbroadcasting=function(){var b=this,g=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){if("sender"===b.getProperty("mode")){var a=this.strToJson(b.getProperty("_EventParametersDataShape")),e={},d;for(d in a)"STRING"===a[d]&&(e[d]={isLocalizable:!0})}return{needsDataLoadingAndError:!1,propertyAttributes:e}};this.renderHtml=function(){return'<div class="widget-content widget-eventbroadcasting" style="display:none;"></div>'};this.afterRender=
function(){if("receiver"===b.getProperty("mode")&&b.getProperty("eventName")){var a=b.getProperty("eventName");$(document).on("eventbroadcastingwidget_eventBroadcasting_"+a.replaceAll(".","_")+".eventbroadcastingwidget_eventBroadcasting_"+g,function(e,d){if(e=b.getProperty("debugMode"))console.log("EventBroadcasting - triggered -> Start"),console.log("EventBroadcasting - triggered -> event = "+a),console.log("EventBroadcasting - triggered -> json = "+JSON.stringify(d));var f=b.strToJson(b.getProperty("_EventParametersDataShape")),
c;for(c in f)switch(f[c]){case "INTEGER":b.setProperty(c,parseInt(d[c],10));break;case "NUMBER":b.setProperty(c,parseFloat(d[c]));break;case "DATETIME":b.setProperty(c,new Date(d[c]));break;case "BOOLEAN":b.setProperty(c,"true"===d[c]||!0===d[c]);break;default:b.setProperty(c,d[c])}b.jqElement.triggerHandler("Triggered");e&&console.log("EventBroadcasting - triggered -> Stop")})}};this.serviceInvoked=function(a){if("Trigger"===a&&"sender"===b.getProperty("mode")&&b.getProperty("eventName")){a={};var e=
b.getProperty("debugMode"),d=b.getProperty("eventName"),f=this.strToJson(b.getProperty("_EventParametersDataShape")),c;for(c in f)a[c]=b.getProperty(c);e&&(console.log("EventBroadcasting - trigger -> Start"),console.log("EventBroadcasting - trigger -> event = "+d),console.log("EventBroadcasting - trigger -> json = "+JSON.stringify(a)));$(document).trigger("eventbroadcastingwidget_eventBroadcasting_"+d.replaceAll(".","_"),a);e&&console.log("EventBroadcasting - trigger -> Stop")}};this.updateProperty=
function(a){if("eventName"===a.TargetProperty)this.setProperty("eventName",a.RawSinglePropertyValue),this.afterRender();else if("mode"===a.TargetProperty)this.setProperty("mode",a.RawSinglePropertyValue),this.afterRender();else{var b=this.strToJson(this.getProperty("_EventParametersDataShape"));if(a.TargetProperty in b)switch(b[a.TargetProperty]){case "INTEGER":this.setProperty(a.TargetProperty,parseInt(a.SinglePropertyValue,10));break;case "NUMBER":this.setProperty(a.TargetProperty,parseFloat(a.SinglePropertyValue));
break;case "DATETIME":this.setProperty(a.TargetProperty,new Date(a.SinglePropertyValue));break;case "BOOLEAN":this.setProperty(a.TargetProperty,"true"===a.SinglePropertyValue||!0===a.SinglePropertyValue);break;default:this.setProperty(a.TargetProperty,a.RawSinglePropertyValue)}}};this.strToJson=function(a){a?"string"===typeof a&&(a=JSON.parse(a)):a={};return a};this.beforeDestroy=function(){if("receiver"===b.getProperty("mode"))try{$(document).off("eventbroadcastingwidget_eventBroadcasting_"+b.getProperty("eventName").replaceAll(".",
"_")+".eventbroadcastingwidget_eventBroadcasting_"+g)}catch(a){TW.log.error("EventBroadcasting Before Destroy Error",a)}}};